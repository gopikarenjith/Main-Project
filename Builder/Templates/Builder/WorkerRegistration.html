{% extends 'Builder/Header.html' %}
{% block content %}
<br><br><br><br><br><br>
<head>
    <title>WorkerRegistration</title>

</head>
<style>
/* ------------------ ORANGE MODERN FORM STYLING ------------------ */

.workerreg-wrapper {
    display: flex;
    justify-content: center;
    padding: 40px;
    font-family: Arial, Helvetica, sans-serif;
}

.workerreg-card {
    background: #fff7ef;
    width: 550px;
    padding: 35px 45px;
    border-radius: 14px;
    border: 3px solid #ff8a00;
    box-shadow: 0 4px 15px rgba(255, 136, 0, 0.3);
}

.workerreg-title {
    text-align: center;
    font-size: 25px;
    font-weight: bold;
    margin-bottom: 25px;
    color: #ff6c00;
}

.workerreg-table {
    width: 100%;
}

.workerreg-table td {
    padding: 12px 5px;
    font-size: 16px;
    color: #444;
}

.workerreg-input,
.workerreg-select,
.workerreg-file,
.workerreg-textarea {
    width: 100%;
    padding: 10px;
    border: 2px solid #ffb066;
    border-radius: 6px;
    font-size: 15px;
    background: white;
    transition: 0.3s;
}

.workerreg-input:focus,
.workerreg-select:focus,
.workerreg-textarea:focus {
    border-color: #ff6c00;
    outline: none;
}

.workerreg-file {
    border: none;
}

.workerreg-btn {
    background: #ff6c00;
    padding: 12px 25px;
    border: none;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    margin: 8px;
    font-size: 15px;
    transition: 0.3s;
}

.workerreg-btn:hover {
    background: #ff8f33;
}

.workerreg-center {
    text-align: center;
}

</style>

<div class="workerreg-wrapper">
    <div class="workerreg-card">

        <div class="workerreg-title">Worker Registration</div>

        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <table class="workerreg-table">

                <tr>
                    <td>Name</td>
                    <td>
                        <input required type="text" name="txt_name"
                        class="workerreg-input"
                        title="Name Allows Only Alphabets,Spaces and First Letter Must Be Capital Letter"
                        pattern="^[A-Z]+[a-zA-Z ]*$" />
                    </td>
                </tr>

                <tr>
                    <td>Email</td>
                    <td><input type="email" required name="txt_email" class="workerreg-input" /></td>
                </tr>

                <tr>
                    <td>Contact</td>
                    <td>
                        <input type="text" required name="txt_contact" class="workerreg-input"
                        pattern="[7-9]{1}[0-9]{9}"
                        title="Phone number with 7-9 and remaining 9 digits 0-9" />
                    </td>
                </tr>

                <tr>
                    <td>Workertype</td>
                    <td>
                        <select name="sel_workertype" required id="sel_workertype" class="workerreg-select">
                            <option value="">---select---</option>
                            {% for i in workertypedata %}
                            <option value="{{i.id}}">{{i.workertype_name}}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>District</td>
                    <td>
                        <select name="sel_district" required id="sel_district" class="workerreg-select">
                            <option value="">---select---</option>
                            {% for i in districtDatas %}
                            <option value="{{i.id}}">{{i.district_name}}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>Place</td>
                    <td>
                        <select name="sel_place" required id="sel_place" class="workerreg-select">
                            <option value="">---select---</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>Photo</td>
                    <td>
                        <input type="file" name="file_photo" required accept="image/*"
                        id="file_photo" class="workerreg-file">
                    </td>
                </tr>

                <tr>
                    <td>Password</td>
                    <td>
                        <input type="text" name="txt_password"
                        class="workerreg-input"
                        required
                        pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                        title="Must contain at least one number, one uppercase, one lowercase letter, and 8+ characters">
                    </td>
                </tr>

                <tr>
                    <td>Re-password</td>
                    <td><input type="password" required name="txt_repassword" class="workerreg-input" /></td>
                </tr>

                <tr>
                    <td colspan="2" class="workerreg-center">
                        <button type="submit" class="workerreg-btn">Sign Up</button>
                        <button type="reset" class="workerreg-btn">Cancel</button>
                    </td>
                </tr>

            </table>
        </form>

    </div>
</div>

{% if msg %}
<script>
    alert("{{msg}}")
    window.location="{% url 'Builder:WorkerRegistration' %}"
</script>
{% endif %}

<!-- jQuery & AJAX (unchanged) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $("#sel_district").change(function () {
        var did = $(this).val();
        var ur = "{% url 'Guest:AjaxPlace' %}";
        $.ajax({
            url: ur,
            data: { did: did },
            success: function (data) {
                $("#sel_place").html(data);
            },
        });
    });
</script>

{% endblock %}
